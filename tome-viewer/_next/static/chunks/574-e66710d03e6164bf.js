"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{2603:(e,s,n)=>{n.d(s,{A:()=>w});var t=n(5155),a=n(2115),i=n(5970),r=n(357),l=n(9560),o=n(9300),c=n(5416),d=n(63),x=n(1745),h=n(7448),p=n(4782),u=n(4288),m=n(317),j=n(9518),y=n(1008),A=n(4839),g=n(9250),b=n(4193),v=n(2981),f=n(694),_=n(795);function k(){let[e,s]=(0,a.useState)(""),[n,l]=(0,a.useState)([]),[o,c]=(0,a.useState)(!1),k=(0,d.useRouter)(),w=(0,a.useRef)(null),{classes:I,subclasses:C,races:L,talentTypes:W,isLoading:S}=(0,_.E)(),E=Object.keys(I).length>0&&Object.keys(C).length>0&&W.length>0&&Object.keys(L).length>0;return(0,a.useEffect)(()=>{if(!e||!E)return void l([]);let s=[],n=e.toLowerCase(),t=[];Object.entries(I).forEach(e=>{let[s,a]=e;a.display_name.toLowerCase().includes(n)&&t.push(s)}),Object.entries(C).forEach(e=>{let[a,i]=e,r="",l="";for(let[e,s]of Object.entries(I))if(s.subclass_list.includes(a)){r=s.display_name,l=e;break}(i.display_name.toLowerCase().includes(n)||t.includes(l))&&s.push({name:a,displayName:i.display_name,type:"subclass",parentName:r,path:"/viewers/classes",anchor:"subclass-".concat(a)})}),W.forEach(e=>{e.name.toLowerCase().includes(n)&&s.push({name:e.href,displayName:e.name,type:"skill",path:"/viewers/skills",anchor:"skill-".concat(e.href.replace(/\//g,"-"))})}),Object.entries(L).forEach(e=>{let[t,a]=e;a.display_name.toLowerCase().includes(n)&&s.push({name:t,displayName:a.display_name,type:"race",path:"/viewers/races",anchor:"race-".concat(t)})}),l(s)},[e,I,C,W,L,E]),(0,t.jsx)(x.x,{onClickAway:()=>c(!1),children:(0,t.jsxs)(r.A,{ref:w,sx:{position:"relative",width:"100%"},children:[(0,t.jsx)(h.A,{fullWidth:!0,placeholder:"搜索职业、技能或种族...",value:e,onChange:e=>{s(e.target.value),c(!0)},onClick:()=>c(!0),InputProps:{startAdornment:(0,t.jsx)(p.A,{position:"start",children:(0,t.jsx)(v.A,{})}),endAdornment:e&&(0,t.jsx)(p.A,{position:"end",children:(0,t.jsx)(u.A,{size:"small",onClick:()=>{s(""),c(!1)},children:(0,t.jsx)(f.A,{})})})},sx:{bgcolor:"background.paper"}}),o&&e&&(0,t.jsx)(i.A,{elevation:3,sx:{position:"absolute",top:"100%",left:0,right:0,maxHeight:400,overflow:"auto",zIndex:1200,mt:.5},children:S?(0,t.jsx)(r.A,{sx:{p:2,textAlign:"center"},children:(0,t.jsx)(m.A,{children:"加载中..."})}):n.length>0?(0,t.jsx)(j.A,{disablePadding:!0,children:["subclass","skill","race"].map(e=>{let s=n.filter(s=>s.type===e);if(0===s.length)return null;let i={subclass:"职业",skill:"技能",race:"种族"};return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(y.Ay,{sx:{bgcolor:"action.selected",py:.5},children:(0,t.jsxs)(m.A,{variant:"subtitle2",children:[i[e]||e," (",s.length,")"]})}),(0,t.jsx)(A.A,{}),s.map((e,s)=>(0,t.jsxs)(y.Ay,{onClick:()=>{k.push("".concat(e.path)),setTimeout(()=>{if(e.anchor){let s=document.getElementById(e.anchor);s&&(s.scrollIntoView({behavior:"smooth",block:"start"}),"subclass"===e.type&&s.click())}},300),c(!1)},sx:{py:1,cursor:"pointer","&:hover":{bgcolor:"action.hover"}},children:[(0,t.jsx)(g.A,{primary:"subclass"===e.type&&e.parentName?"".concat(e.parentName,"/").concat(e.displayName):e.displayName}),(0,t.jsx)(b.A,{label:i[e.type]||e.type,size:"small",color:"subclass"===e.type?"primary":"skill"===e.type?"secondary":"default",variant:"outlined"})]},"".concat(e.type,"-").concat(e.name)))]},e)})}):e?(0,t.jsx)(r.A,{sx:{p:2,textAlign:"center"},children:(0,t.jsx)(m.A,{children:"未找到匹配结果"})}):null})]})})}function w(){var e;let s=(0,d.usePathname)(),n=(0,d.useRouter)(),a=(e=s||"/viewers/classes").startsWith("/viewers/skills")?"skills":e.startsWith("/viewers/races")?"races":"classes";return(0,t.jsx)(i.A,{elevation:1,sx:{position:"sticky",top:0,zIndex:10,mb:2},children:(0,t.jsx)(r.A,{sx:{px:2,py:1},children:(0,t.jsxs)(l.A,{component:"div",container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",direction:{xs:"column",sm:"row"},children:[(0,t.jsx)(l.A,{component:"div",sx:{gridColumn:{xs:"span 12",sm:"auto"}},children:(0,t.jsxs)(o.A,{value:a,onChange:(e,s)=>{"classes"===s&&n.push("/viewers/classes"),"skills"===s&&n.push("/viewers/skills"),"races"===s&&n.push("/viewers/races")},variant:"standard",sx:{minHeight:"48px"},children:[(0,t.jsx)(c.A,{label:"职业",value:"classes"}),(0,t.jsx)(c.A,{label:"技能",value:"skills"}),(0,t.jsx)(c.A,{label:"种族",value:"races"})]})}),(0,t.jsx)(l.A,{component:"div",sx:{gridColumn:{xs:"span 12",sm:"span 7",md:"span 6",lg:"span 5"}},children:(0,t.jsx)(k,{})})]})})})}},5e3:(e,s,n)=>{n.d(s,{A:()=>d});var t=n(5155);n(2115);var a=n(5970),i=n(317),r=n(357),l=n(4839),o=n(2428),c=n(5679);function d(e){let{selectedTalent:s,title:n="技能详情"}=e;return(0,t.jsxs)(a.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,t.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:n}),s?(0,t.jsxs)(r.A,{children:[(0,t.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,t.jsx)(r.A,{sx:{width:48,height:48,backgroundColor:"grey.200",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:s.image?(0,t.jsx)("img",{src:"".concat(c.A,"/img/talents/48/").concat(s.image),alt:s.name,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.target.style.display="none"}}):(0,t.jsx)(i.A,{variant:"h5",children:"?"})}),(0,t.jsx)(r.A,{children:(0,t.jsx)(i.A,{variant:"h6",children:s.name})})]}),(0,t.jsx)(l.A,{sx:{my:2}}),(0,t.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:[s.mode&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"使用模式"}),(0,t.jsx)(i.A,{variant:"body2",sx:{fontWeight:500},children:s.mode})]}),s.cost&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"消耗"}),(0,t.jsx)(i.A,{variant:"body2",dangerouslySetInnerHTML:{__html:s.cost}})]}),s.range&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"使用范围"}),(0,t.jsx)(i.A,{variant:"body2",dangerouslySetInnerHTML:{__html:s.range}})]}),s.cooldown&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"冷却时间"}),(0,t.jsx)(i.A,{variant:"body2",dangerouslySetInnerHTML:{__html:s.cooldown}})]}),s.use_speed&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"使用速度"}),(0,t.jsx)(i.A,{variant:"body2",sx:{fontWeight:500},children:s.use_speed})]}),s._dlc&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1,display:"flex",alignItems:"baseline",gap:1},children:[(0,t.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{minWidth:64},children:"DLC"}),(0,t.jsx)(i.A,{variant:"body2",children:s._dlc_name})]})]}),s.require&&s.require.length>0&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1.5,mb:2},children:[(0,t.jsx)(i.A,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"学习需求"}),s.require.length>1?(0,t.jsx)(o.A,{placement:"right",title:(0,t.jsxs)(r.A,{sx:{p:1},children:[(0,t.jsxs)(i.A,{variant:"caption",sx:{display:"block",mb:.5},children:["Requirements at 1-",s.points||5," talent points:"]}),(0,t.jsx)(r.A,{component:"ol",sx:{pl:2,m:0},children:s.require.map((e,s)=>(0,t.jsx)(r.A,{component:"li",children:(0,t.jsx)(i.A,{variant:"caption",dangerouslySetInnerHTML:{__html:e}})},s))})]}),children:(0,t.jsx)(i.A,{variant:"body2",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"help"},dangerouslySetInnerHTML:{__html:s.require[0]}})}):(0,t.jsx)(i.A,{variant:"body2",dangerouslySetInnerHTML:{__html:s.require[0]}})]}),s.description&&(0,t.jsxs)(a.A,{variant:"outlined",sx:{p:1.5},children:[(0,t.jsx)(i.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"介绍"}),(0,t.jsx)(i.A,{variant:"body2",dangerouslySetInnerHTML:{__html:s.description}}),s.no_unlearn_last&&(0,t.jsx)(r.A,{sx:{mt:1,p:1,borderRadius:1,border:"1px solid",borderColor:"warning.main"},children:(0,t.jsx)(i.A,{variant:"body2",sx:{fontStyle:"italic"},children:"本技能会永久性的影响这个游戏世界，所以学习之后无法移除。"})}),s.source_code&&(0,t.jsx)(r.A,{sx:{mt:2,pt:2,borderTop:"1px dashed",borderColor:"divider"},children:(0,t.jsx)(r.A,{sx:{mt:.5},children:(0,t.jsx)("a",{href:"https://git.net-core.org/tome/t-engine4/-/blob/master/game/modules/tome/".concat(s.source_code[0],"?ref_type=heads#L").concat(s.source_code[1]),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,t.jsx)(i.A,{variant:"body2",color:"primary",sx:{display:"flex",alignItems:"center",gap:.5},children:"跳转至技能源代码"})})})})]})]}):(0,t.jsx)(i.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"请选择一个技能"})]})}}}]);