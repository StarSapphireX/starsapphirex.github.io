"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{237:(t,e,a)=>{a.d(e,{default:()=>l});var o=a(2691),r=a(4732),n=a.n(r);let l=(0,o.A)({colorSchemes:{dark:!0},cssVariables:{colorSchemeSelector:"class"},palette:{mode:"dark"},typography:{fontFamily:n().style.fontFamily},components:{MuiCssBaseline:{styleOverrides:{"acronym.talent-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(25, 118, 210, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.stat-variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(156, 39, 176, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}},"acronym.variable":{textDecoration:"underline",textDecorationStyle:"dotted",textDecorationColor:"rgba(76, 175, 80, 0.7)",cursor:"help",position:"relative","&:hover::after":{content:"attr(title)",position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",padding:"10px 15px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",borderRadius:"4px",fontSize:"0.75rem",whiteSpace:"pre-wrap",zIndex:1500,minWidth:"250px",maxWidth:"350px",width:"max-content",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",marginBottom:"5px",textAlign:"center",lineHeight:"1.4"},"&:hover::before":{content:'""',position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",borderWidth:"5px",borderStyle:"solid",borderColor:"transparent transparent rgba(0, 0, 0, 0.8) transparent",marginBottom:"0px",zIndex:1500}}}},MuiAlert:{styleOverrides:{root:{variants:[{props:{severity:"info"},style:{backgroundColor:"#60a5fa"}}]}}}}})},795:(t,e,a)=>{a.d(e,{DataProvider:()=>s,E:()=>i});var o=a(5155),r=a(2115),n=a(5679);let l=(0,r.createContext)(void 0);function s(t){let{children:e}=t,[a,s]=(0,r.useState)({}),[i,c]=(0,r.useState)({}),[d,p]=(0,r.useState)({}),[h,u]=(0,r.useState)({}),[f,m]=(0,r.useState)([]),[g,y]=(0,r.useState)([]),[b,x]=(0,r.useState)([]),[_,w]=(0,r.useState)(null),[S,v]=(0,r.useState)(!0),[A,k]=(0,r.useState)(0),[j,C]=(0,r.useState)(null),[E,D]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{try{v(!0),C(null),k(5);let t=await fetch(n.A+"/data/master/tome.json"),e=await t.json();w(e),k(10);let a=await fetch(n.A+"/data/master/classes.json"),o=await a.json();s(o.classes||{}),c(o.subclasses||{}),k(15);let r=await fetch(n.A+"/data/master/races.json"),l=await r.json();p(l.races||{}),u(l.subraces||{}),k(20);let i=await fetch(n.A+"/data/master/search.talents-types.json"),d=await i.json();m(d||[]);let h=[...d];h.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&(t.category=e[0])}});let f=e.talent_categories.map(t=>({id:t,name:e.talent_categories_names[t]||t,types:[]}));f.find(t=>"other"===t.id)||f.push({id:"other",name:e.talent_categories_names.other||"其他",types:[]}),f.forEach(t=>{t.types=h.filter(e=>e.category===t.id)});let g=f.find(t=>"other"===t.id);if(g){let t=h.filter(t=>!f.some(e=>e.id===t.category));g.types.push(...t)}let b=f.filter(t=>t.types.length>0);y(b),k(30);let x=new Set;h.forEach(t=>{if(t.href){let e=t.href.replace(/^talents\//,"").split("/");e.length>0&&x.add(e[0])}});let _=Array.from(x),S=[1,1.3,1.5],A=_.length*S.length,j=0,E={},W=[];for(let t of _)for(let e of S){let a=1===e?"1":e.toString(),o=(async()=>{try{let o=await fetch("".concat(n.A,"/data/master/talents.").concat(t,"-").concat(a,".json")),r=await o.json(),l=[];return Array.isArray(r)&&r.forEach(t=>{if((null==t?void 0:t.type)&&Array.isArray(t.talents)){let a=t.type.startsWith("talents/")?t.type:"talents/".concat(t.type),o=t.talents.map(t=>({id:t.id,name:t.name,short_name:t.short_name,description:t.info_text||"",image:t.image||"",mode:t.mode||"",points:t.points||0,range:t.range||"",type:t.type||[],cost:t.cost||"",cooldown:t.cooldown||"",use_speed:t.use_speed||"",require:t.require||[],no_unlearn_last:t.no_unlearn_last||!1,_dlc:t._dlc||"",_dlc_name:t._dlc_name||"",source_code:t.source_code}));l.push({talentType:a,level:e,talents:o})}}),l}catch(a){return console.error("Error loading talents for ".concat(t," level ").concat(e,":"),a),null}finally{j++,k(30+Math.floor(j/A*70))}})();W.push(o)}(await Promise.all(W)).forEach(t=>{Array.isArray(t)&&t.forEach(t=>{t&&t.talentType&&t.talents&&(E["".concat(t.talentType,"|").concat(t.level)]=t.talents)})}),D(E),k(100),v(!1)}catch(t){console.error("Error loading data:",t),C("Failed to load game data. Please refresh the page."),v(!1)}})()},[]);let W=async(t,e)=>{try{let o=t.startsWith("talents/")?t:"talents/".concat(t);console.log("Original talent type:",t),console.log("Normalized talent type:",o);let r=e||1;if(!e)for(let t of Object.keys(a))for(let e of a[t].subclass_list||[]){let t=i[e];if(t){if(t.talents_types_class&&t.talents_types_class[o]){r=t.talents_types_class[o][1]||1;break}if(t.talents_types_generic&&t.talents_types_generic[o]){r=t.talents_types_generic[o][1]||1;break}}}let n=[1,1.3,1.5].includes(r)?r:1,l="".concat(o,"|").concat(n);if(console.log("Looking for cache key:",l),console.log("Valid level:",n),E[l])return console.log("Found in cache!"),E[l];let s="".concat(t,"|").concat(n);if(E[s])return console.log("Found in cache with original type!"),E[s];let c=o.replace(/^talents\//,""),d="talents/".concat(c,"|").concat(n);if(E[d])return console.log("Found in cache with adjusted prefix!"),E[d];console.warn("Talent data for ".concat(l," not found in preloaded cache")),console.log("Available cache keys:",Object.keys(E));let p=Object.keys(E).filter(e=>e.includes(o)||e.includes(t)||e.includes(c));if(p.length>0)return console.log("Found partial matches:",p),E[p[0]];return[]}catch(e){return console.error("Error getting talents for ".concat(t,":"),e),[]}};return(0,o.jsx)(l.Provider,{value:{classes:a,subclasses:i,races:d,subraces:h,talentTypes:f,talentCategories:g,talentSystems:b,tomeData:_,isLoading:S,loadingProgress:A,error:j,getTalentsForType:W},children:e})}function i(){let t=(0,r.useContext)(l);if(void 0===t)throw Error("useData must be used within a DataProvider");return t}},5679:(t,e,a)=>{a.d(e,{A:()=>o});let o="/tometips"}}]);