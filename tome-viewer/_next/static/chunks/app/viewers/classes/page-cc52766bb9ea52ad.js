(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{3159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(5155),l=s(2115),a=s(6129),n=s(6245),i=s(237),o=s(2603),c=s(357),d=s(5970),x=s(317),h=s(4839),m=s(4193),p=s(5e3),u=s(795),g=s(5679);function b(){let{classes:e,subclasses:t,getTalentsForType:s,isLoading:a}=(0,u.E)(),[n,i]=(0,l.useState)(""),[o,b]=(0,l.useState)(null),[j,y]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(!n)return;let e=t[n];if(!e)return;let r=async(e,t)=>{let r=[];for(let[l,[a,n,i]]of Object.entries(e))try{let e=await s(l,n);e.length&&r.push({isUnlocked:a,name:i,talents:e,isClass:t,level:n})}catch(e){console.warn("加载失败",l,e)}return r};y([...await r(e.talents_types_class||{},!0),...await r(e.talents_types_generic||{},!1)])})()},[n,t,s]);let A=t[n];return(0,r.jsxs)(c.A,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[(0,r.jsx)(c.A,{sx:{flex:"0 0 200px",minWidth:"50px"},children:(0,r.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,r.jsx)(x.A,{variant:"h6",gutterBottom:!0,children:"职业选择"}),Object.entries(e).map(e=>{let[s,l]=e;return(0,r.jsxs)(c.A,{id:"class-".concat(s),sx:{mb:3},children:[(0,r.jsx)(x.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:l.display_name}),(0,r.jsx)(c.A,{sx:{pl:2},children:l.subclass_list.map(e=>{let s=t[e],l=n===e;return(0,r.jsx)(c.A,{id:"subclass-".concat(e),onClick:()=>i(e),sx:{p:1,mb:.5,borderRadius:1,cursor:"pointer",backgroundColor:l?"primary.light":"transparent",color:l?"primary.contrastText":"text.primary","&:hover":{backgroundColor:l?"primary.light":"action.hover"}},children:(0,r.jsx)(x.A,{variant:"body2",children:(null==s?void 0:s.display_name)||e})},e)})})]},s)})]})}),(0,r.jsx)(c.A,{sx:{flex:"1 1 400px",minWidth:"160px"},children:(0,r.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,r.jsxs)(x.A,{variant:"h6",gutterBottom:!0,children:["技能列表",A&&" - ".concat(A.display_name)]}),A&&(0,r.jsxs)(c.A,{sx:{display:"flex",alignItems:"flex-start",mb:2,p:2,backgroundColor:"background.paper",borderRadius:1},children:[(0,r.jsx)(c.A,{sx:{mr:3},children:(0,r.jsx)("img",{src:"".concat(g.A,"/img/class-icons/").concat(A.short_name.toLowerCase(),"_128_bg.png"),alt:A.display_name,style:{width:128,height:128},onError:e=>{e.target.style.display="none"}})}),(0,r.jsx)(c.A,{children:(0,r.jsx)(x.A,{variant:"body2",dangerouslySetInnerHTML:{__html:A.desc||"暂无描述"}})})]}),j.length>0?(0,r.jsx)(c.A,{children:j.map((e,t)=>{let s=e.isClass?e.talents.slice(0,4):e.talents,l=0===t&&e.isClass,a=t>0&&j[t-1].isClass&&!e.isClass;return(0,r.jsxs)(c.A,{sx:{mb:3},children:[l&&(0,r.jsx)(h.A,{sx:{my:2},children:(0,r.jsx)(m.A,{label:"职业技能",color:"primary",variant:"outlined",size:"small"})}),a&&(0,r.jsx)(h.A,{sx:{my:2},children:(0,r.jsx)(m.A,{label:"通用技能",color:"secondary",variant:"outlined",size:"small"})}),(0,r.jsxs)(x.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1,color:e.isUnlocked?"primary.main":"grey.500",display:"flex",alignItems:"center",gap:1},children:[e.name," x",e.level.toFixed(1)]}),(0,r.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:1,mb:2},children:s.map((e,t)=>(0,r.jsxs)(c.A,{onClick:()=>b(e),sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",textAlign:"center",backgroundColor:(null==o?void 0:o.id)===e.id?"action.selected":"transparent","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:[(0,r.jsx)(c.A,{sx:{width:48,height:48,backgroundColor:"background.default",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:1},children:e.image?(0,r.jsx)("img",{src:"".concat(g.A,"/img/talents/48/").concat(e.image),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.target.style.display="none"}}):(0,r.jsx)(x.A,{variant:"h6",children:"?"})}),(0,r.jsx)(x.A,{variant:"caption",display:"block",sx:{fontWeight:"bold"},children:e.name})]},"".concat(e.id,"-").concat(t)))})]},t)})}):(0,r.jsx)(x.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:n?"暂无技能数据":"请在左侧选择职业"})]})}),(0,r.jsx)(c.A,{sx:{flex:"0 0 400px",minWidth:"120px"},children:(0,r.jsx)(p.A,{selectedTalent:o,title:"技能详情"})})]})}function j(){return(0,r.jsx)(a.default,{theme:i.default,children:(0,r.jsxs)(n.A,{maxWidth:"xl",sx:{py:2},children:[(0,r.jsx)(o.A,{}),(0,r.jsx)(b,{})]})})}},6987:(e,t,s)=>{Promise.resolve().then(s.bind(s,3159))}},e=>{e.O(0,[214,456,717,255,739,574,441,493,358],()=>e(e.s=6987)),_N_E=e.O()}]);