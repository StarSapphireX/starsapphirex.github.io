(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{5621:(e,t,r)=>{Promise.resolve().then(r.bind(r,9794))},9794:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var n=r(5155),s=r(2115),l=r(6129),i=r(6245),a=r(237),o=r(2603),c=r(357),d=r(5970),x=r(317),h=r(4839),u=r(4193),p=r(795),m=r(5e3),b=r(5679);function g(){let{races:e,subraces:t,getTalentsForType:r}=(0,p.E)(),[l,i]=(0,s.useState)(""),[a,o]=(0,s.useState)([]),[g,j]=(0,s.useState)(null),A=t[l];(0,s.useEffect)(()=>{(async()=>{if(!l)return;let e=t[l];if(!e)return;let n=async e=>{let t=[];for(let[n,[s,l,i]]of Object.entries(e))try{let e=await r(n,l);e.length&&t.push({isUnlocked:s,name:i,talents:e,level:l})}catch(e){console.warn("加载失败",n,e)}return t};o(await n(e.talents_types||{}))})()},[l,e,r]);let f={},y={};return Object.entries(e).forEach(e=>{let[t,r]=e;r.subrace_list&&r.subrace_list.length>0&&(f[t]=r,y[t]=r.subrace_list)}),(0,s.useEffect)(()=>{j(null)},[l]),(0,n.jsxs)(c.A,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[(0,n.jsx)(c.A,{sx:{flex:"0 0 200px",minWidth:"50px"},children:(0,n.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,n.jsx)(x.A,{variant:"h6",gutterBottom:!0,children:"种族选择"}),Object.entries(f).map(e=>{let[r,s]=e;return(0,n.jsxs)(c.A,{id:"race-".concat(r),sx:{mb:3},children:[(0,n.jsx)(x.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1,color:"primary.main"},children:s.display_name}),(0,n.jsx)(c.A,{sx:{pl:2},children:s.subrace_list.map(e=>{let r=t[e],s=l===e;return(0,n.jsx)(c.A,{id:"subrace-".concat(e),onClick:()=>i(e),sx:{p:1,mb:.5,borderRadius:1,cursor:"pointer",backgroundColor:s?"primary.light":"transparent",color:s?"primary.contrastText":"text.primary","&:hover":{backgroundColor:s?"primary.light":"action.hover"}},children:(0,n.jsx)(x.A,{variant:"body2",children:(null==r?void 0:r.display_name)||e})},e)})})]},r)})]})}),(0,n.jsx)(c.A,{sx:{flex:"1 1 400px",minWidth:"160px"},children:(0,n.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,n.jsxs)(x.A,{variant:"h6",gutterBottom:!0,children:["种族介绍",A&&" - ".concat(A.display_name)]}),A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{sx:{display:"flex",alignItems:"flex-start",mb:2,p:2,backgroundColor:"background.paper",borderRadius:1},children:(0,n.jsx)(c.A,{children:(0,n.jsx)(x.A,{variant:"body2",dangerouslySetInnerHTML:{__html:A.desc||"暂无描述"}})})}),a.length>0?(0,n.jsxs)(c.A,{children:[(0,n.jsx)(h.A,{sx:{my:2},children:(0,n.jsx)(u.A,{label:"种族技能",color:"primary",variant:"outlined",size:"small"})}),a.map((e,t)=>(0,n.jsxs)(c.A,{sx:{mb:3},children:[(0,n.jsxs)(x.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1,color:e.isUnlocked?"primary.main":"grey.500",display:"flex",alignItems:"center",gap:1},children:[e.name," x",e.level.toFixed(1)]}),(0,n.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:1,mb:2},children:e.talents.map((e,t)=>(0,n.jsxs)(c.A,{onClick:()=>j(e),sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",textAlign:"center",backgroundColor:(null==g?void 0:g.id)===e.id?"action.selected":"transparent","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:[(0,n.jsx)(c.A,{sx:{width:48,height:48,backgroundColor:"background.default",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:1},children:e.image?(0,n.jsx)("img",{src:"".concat(b.A,"/img/talents/48/").concat(e.image),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.target.style.display="none"}}):(0,n.jsx)(x.A,{variant:"h6",children:"?"})}),(0,n.jsx)(x.A,{variant:"caption",display:"block",sx:{fontWeight:"bold"},children:e.name})]},"".concat(e.id,"-").concat(t)))})]},t))]}):(0,n.jsx)(x.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:l?"暂无种族技能数据":"请在左侧选择种族"})]}):(0,n.jsx)(x.A,{color:"text.secondary",sx:{mt:4,textAlign:"center"},children:"请在左侧选择一个种族"})]})}),(0,n.jsx)(c.A,{sx:{flex:"0 0 400px",minWidth:"120px"},children:(0,n.jsx)(m.A,{selectedTalent:g,title:"技能详情"})})]})}function j(){return(0,n.jsx)(l.default,{theme:a.default,children:(0,n.jsxs)(i.A,{maxWidth:"xl",sx:{py:2},children:[(0,n.jsx)(o.A,{}),(0,n.jsx)(g,{})]})})}}},e=>{e.O(0,[214,456,717,255,739,574,441,493,358],()=>e(e.s=5621)),_N_E=e.O()}]);