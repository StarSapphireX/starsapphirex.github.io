(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{2596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),n=r(2115),l=r(6129),o=r(6245),i=r(237),a=r(2603),c=r(357),d=r(5970),h=r(317),x=r(5e3),p=r(795),m=r(5679);function f(){let{talentTypes:e,talentCategories:t,classes:r,subclasses:l,tomeData:o,getTalentsForType:i,isLoading:a}=(0,p.E)(),[f,u]=(0,n.useState)([]),[g,y]=(0,n.useState)([]),[b,j]=(0,n.useState)(""),[A,v]=(0,n.useState)([]),[_,k]=(0,n.useState)(null),[C,E]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t.length>0&&y(t),e.length>0&&u(e)},[t,e]),(0,n.useEffect)(()=>{(async()=>{if(0!==f.length){E(!0);try{let e=[];for(let t of f)if(t.href)try{let s=await i(t.href,1);if(0===s.length)continue;let n=1,o=t.href;for(let e of Object.keys(r))for(let t of r[e].subclass_list||[]){let e=l[t];if(e){if(e.talents_types_class&&e.talents_types_class[o]){n=e.talents_types_class[o][1]||1;break}if(e.talents_types_generic&&e.talents_types_generic[o]){n=e.talents_types_generic[o][1]||1;break}}}e.push({type:t.href,name:t.name,talents:s,level:n})}catch(e){console.error("Error loading talents for ".concat(t.href,":"),e)}v(e)}catch(e){console.error("Error loading talent systems:",e)}finally{E(!1)}}})()},[f,r,l,i]),(0,n.useEffect)(()=>{if(!b)return;let e=document.getElementById("system-".concat(b.replace(/\//g,"-")));e&&e.scrollIntoView({behavior:"smooth",block:"start"})},[b]),(0,s.jsxs)(c.A,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[(0,s.jsx)(c.A,{sx:{flex:"0 0 320px",minWidth:"300px"},children:(0,s.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,s.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"技能大系"}),g.map(e=>(0,s.jsxs)(c.A,{sx:{mb:2},children:[(0,s.jsx)(h.A,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,pb:.5,borderBottom:"1px solid",borderColor:"divider",color:"text.secondary"},children:e.name}),e.types.map(e=>{let t=b===e.href;return(0,s.jsx)(c.A,{id:"skill-".concat(e.href.replace(/\//g,"-")),onClick:()=>j(e.href),sx:{p:1,mb:.5,ml:1,borderRadius:1,cursor:"pointer",backgroundColor:t?"primary.light":"transparent",color:t?"primary.contrastText":"text.primary","&:hover":{backgroundColor:t?"primary.light":"action.hover"}},children:(0,s.jsx)(h.A,{variant:"body2",children:e.name})},e.href)})]},e.id))]})}),(0,s.jsx)(c.A,{sx:{flex:"1 1 400px",minWidth:"400px"},children:(0,s.jsxs)(d.A,{sx:{p:2,height:"80vh",overflow:"auto"},children:[(0,s.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"技能列表"}),C?(0,s.jsx)(h.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"加载中..."}):A.length>0?(0,s.jsx)(c.A,{children:A.map(e=>(0,s.jsxs)(c.A,{id:"system-".concat(e.type.replace(/\//g,"-")),sx:{mb:4},children:[(0,s.jsxs)(h.A,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2,pb:1,borderBottom:"1px solid",borderColor:"divider",color:b===e.type?"primary.main":"text.primary",backgroundColor:b===e.type?"action.selected":"transparent",px:1,borderRadius:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)("span",{children:e.name}),e.level&&1!==e.level&&(0,s.jsx)("span",{style:{fontSize:"0.8em",color:"text.secondary"},children:e.level})]}),(0,s.jsx)(c.A,{sx:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:1},children:e.talents.map((e,t)=>(0,s.jsxs)(c.A,{onClick:()=>k(e),sx:{p:1,border:"1px solid",borderColor:"divider",borderRadius:1,cursor:"pointer",textAlign:"center",backgroundColor:(null==_?void 0:_.id)===e.id?"action.selected":"transparent","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:[(0,s.jsx)(c.A,{sx:{width:48,height:48,backgroundColor:"grey.200",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:1},children:e.image?(0,s.jsx)("img",{src:"".concat(m.A,"/img/talents/48/").concat(e.image),alt:e.name,style:{width:"100%",height:"100%",objectFit:"contain"},onError:e=>{e.target.style.display="none"}}):(0,s.jsx)(h.A,{variant:"h6",children:"?"})}),(0,s.jsx)(h.A,{variant:"caption",display:"block",sx:{fontWeight:"bold"},children:e.name})]},"".concat(e.id,"-").concat(t)))})]},e.type))}):(0,s.jsx)(h.A,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"暂无技能数据"})]})}),(0,s.jsx)(c.A,{sx:{flex:"0 0 360px",minWidth:"350px"},children:(0,s.jsx)(x.A,{selectedTalent:_,title:"技能详情"})})]})}function u(){return(0,s.jsx)(l.default,{theme:i.default,children:(0,s.jsxs)(o.A,{maxWidth:"xl",sx:{py:2},children:[(0,s.jsx)(a.A,{}),(0,s.jsx)(f,{})]})})}},3195:(e,t,r)=>{Promise.resolve().then(r.bind(r,2596))}},e=>{e.O(0,[214,456,717,255,739,574,441,493,358],()=>e(e.s=3195)),_N_E=e.O()}]);